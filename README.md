# 항해플러스 백엔드 7기 - 2주차

## 요구사항

### API 명세

- 특강 신청 API
  - `userId`로 특강에 선착순으로 신청
  - 동일한 사용자가 동일한 강의에 대해서 한 번의 수강 신청만 성공
  - 특강은 선착순 30명만 신청가능하며, 선착순 30명이 넘으면 신청 실패
- 특강 신청 가능 목록 API
  - 날짜별로 신청 가능한 특강 목록 조회
- 특강 신청 완료 목록 API
  - 특정 `userId`로 신청 완료(성공)한 특강 목록 조회
  - 항목은 특강 ID, 특강명, 강연자 정보

### Step03

- 설계에 대한 ERD 작성 및 설계 이유를 README 작성
- 선착순 30명 이후의 신청자의 경우 실패하도록 개선
- 동시에 같은 특강에 **40명**이 신청했을 때, 30명만 성공하는 것을 검증하는 통합 테스트 작성

### Step04

- 같은 사용자가 동일한 특강에 대해 신청 실패하도록 개선
- 같은 사용자가 동일한 특강을 **5번** 신청했을 때, 1번만 성공하는 것을 검증하는 통합 테스트 작성

### 요구사항 분석

- 용어 정리
  - 특강: `Lecture`
  - 신청한 특강: `EnrolledLecture`
- 특강의 정원(30명)은 추후 바뀔 가능성이 있지만 현재는 30명으로 고정되어 있음.
  - '30'을 상수로 관리하기 보다는 `LectureCapacityProvider` 객체에서 제공
- 특강이라는 도메인 특성상 한번에 대규모의 트래픽이 예상되므로 `Lecture`에서 `currentEnrolledCount` 상태로 현재 신청 인원 수를 관리한다.
  - `EnrolledLecture`에서 강의 ID에 대한 `count`를 할 수 있지만 성능 이슈가 있음.
  - 예기치 않은 오류 발생 시 `EnrolledLecture`와의 데이터 정합성 관리가 필요
- 사용자가 신청 가능한 특강 목록 조회시 '모집기간'으로 필터링 하며, 정원이 꽉 찼거나, 이미 신청한 특강인 경우 '신청 가능' 상태를 'N'으로 세팅해 반환한다.
- 사용자는 `userId`로 주어지며 사용자 관련해서는 생각하지 않는다.(요청에 대해 무조건 유효하다.)
